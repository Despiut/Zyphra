<!DOCTYPE html>
<html>
<head>
<title>Zyphra</title>
<style>
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    color:white;
    background-color:#111;
    background-image:
        linear-gradient(rgba(200,200,200,0.2) 1px, transparent 1px),
        linear-gradient(90deg, rgba(200,200,200,0.2) 1px, transparent 1px);
    background-size:100px 100px;
    background-position:center;
}

.screen{
    width:100vw;
    height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
}

#builder{display:none}

h1{
    font-size:90px;
    margin-bottom:40px;
    letter-spacing:6px;
}

button{
    padding:15px 35px;
    font-size:20px;
    border-radius:8px;
    border:none;
    background:#2b2b2b;
    color:white;
    cursor:pointer;
    margin:5px;
}

#controls{
    position:fixed;
    top:10px;
    left:50%;
    transform:translateX(-50%);
}

#info{
    position:fixed;
    bottom:20px;
    width:100%;
    text-align:center;
}

canvas{
    display:block;
    margin:auto;
}
</style>
</head>
<body>

<div id="home" class="screen">
    <h1>Zyphra</h1>
    <button id="startBtn">Get Started</button>
</div>

<div id="builder" class="screen">
    <div id="controls">
        <button id="pBtn">Add Proton</button>
        <button id="nBtn">Add Neutron</button>
        <button id="eBtn">Add Electron</button>
    </div>
    <canvas id="canvas"></canvas>
    <div id="info"></div>
</div>

<script>
const canvas=document.getElementById("canvas")
const ctx=canvas.getContext("2d")

function resize(){
    canvas.width=window.innerWidth
    canvas.height=window.innerHeight
}
window.addEventListener("resize",resize)
resize()

const home=document.getElementById("home")
const builder=document.getElementById("builder")
document.getElementById("startBtn").onclick=()=>{
    home.style.display="none"
    builder.style.display="flex"
}

let mode=null
let placing=null

const rings=[140,220,300]
let electrons=[]
let nucleons=[]

document.getElementById("pBtn").onclick=()=>{mode="proton"}
document.getElementById("nBtn").onclick=()=>{mode="neutron"}
document.getElementById("eBtn").onclick=()=>{mode="electron"}

canvas.addEventListener("click",e=>{
    const rect=canvas.getBoundingClientRect()
    const mx=e.clientX-rect.left
    const my=e.clientY-rect.top
    const cx=canvas.width/2
    const cy=canvas.height/2

    const dx=mx-cx
    const dy=my-cy
    const dist=Math.sqrt(dx*dx+dy*dy)

    if(mode==="electron"){
        for(let r of rings){
            if(Math.abs(dist-r)<15){
                electrons.push({ring:r,angle:Math.random()*Math.PI*2})
                break
            }
        }
    }

    if(mode==="proton"||mode==="neutron"){
        if(dist<80){
            nucleons.push({type:mode,angle:Math.random()*Math.PI*2,radius:Math.random()*40})
        }
    }
})

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height)

    const cx=canvas.width/2
    const cy=canvas.height/2

    ctx.beginPath()
    ctx.arc(cx,cy,80,0,Math.PI*2)
    ctx.fillStyle="rgba(150,150,150,0.4)"
    ctx.fill()

    for(let r of rings){
        ctx.beginPath()
        ctx.arc(cx,cy,r,0,Math.PI*2)
        ctx.strokeStyle="rgba(255,255,255,0.2)"
        ctx.stroke()
    }

    for(let n of nucleons){
        n.angle+=0.01
        const x=cx+Math.cos(n.angle)*n.radius
        const y=cy+Math.sin(n.angle)*n.radius
        ctx.beginPath()
        ctx.arc(x,y,8,0,Math.PI*2)
        ctx.fillStyle=n.type==="proton"?"#ff5555":"#aaaaaa"
        ctx.fill()
    }

    for(let e of electrons){
        e.angle+=0.02
        const x=cx+Math.cos(e.angle)*e.ring
        const y=cy+Math.sin(e.angle)*e.ring
        ctx.beginPath()
        ctx.arc(x,y,6,0,Math.PI*2)
        ctx.fillStyle="cyan"
        ctx.fill()
    }

    requestAnimationFrame(draw)
}

draw()
</script>

</body>
</html>
